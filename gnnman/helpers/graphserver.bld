#!/bin/bash

##
## Build the graph server executable.
##


cd ${HOME}/gnn-lambda/

build_GPU='no'
if [[ $1 == "GPU" || $1 == "gpu" ]]; then
	build_GPU='yes'
fi

build_type='Release'
if [[ $2 == "d" ]]; then
    build_type='Debug'
fi

if [ ! -d build ]; then
    mkdir build
fi

cd build
cmake .. -DBUILD_GRAPH=yes -DBUILD_GPU=$build_GPU -DCMAKE_BUILD_TYPE=${build_type}
make

mv graph-server/graphserver .
