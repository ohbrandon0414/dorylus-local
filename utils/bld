#! /bin/bash

## BUILD SCRIPT ##
## Given an option, build the executable and distribute the script across the 
## cluster
##	--Most commonly used have abbreviated opts but full make command can 
##	  be provided
##	--If adding another option to case, should correspond with option in 
##	  b+r to build and run benchmark
##	Note: File could definitely be cleaned up...

cd $( dirname $0 )/../build

make clean
make -s mode=debug

if [ $? -eq 0 ]; then 
	cd ..
	./utils/send_file build/gnn-lambda.bin
    echo -e "\e[92;1mSuccessfully built the system, congrats ;)\e[0m"
else
    echo -e "\e[91;1mBuild failed!\e[0m"
	exit 1
fi
